# 国土交通省 入札案件抽出 Chrome拡張機能

入札情報サービスの工事案件概要ページから必要な情報を抽出し、スプレッドシートへの貼り付け用データとして整形するChrome拡張機能です。

## 機能

- 🔍 入札情報サービスの案件詳細ページから自動でデータを抽出
- 📋 スプレッドシート用にタブ区切り形式で整形
- 📑 ワンクリックでクリップボードにコピー
- ⚙️ カスタマイズ可能な設定オプション
- 🔔 完了通知機能

## インストール方法

### 開発版のインストール

1. このリポジトリをクローン
   ```bash
   git clone https://github.com/takahiro-shimizu-2/mlit-bid.git
   cd mlit-bid
   ```

2. Chromeで拡張機能ページを開く
   - アドレスバーに `chrome://extensions/` を入力
   - または、メニュー → その他のツール → 拡張機能

3. デベロッパーモードを有効にする
   - ページ右上の「デベロッパーモード」をONに切り替え

4. 拡張機能を読み込む
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - `src` フォルダを選択

## 使い方

1. **対象ページを開く**
   - 入札情報サービス（https://www.i-ppi.jp）にアクセス
   - 工事案件を検索し、詳細ページを開く

2. **データを抽出**
   - ブラウザのツールバーにある拡張機能アイコンをクリック
   - 「データを抽出」ボタンをクリック

3. **スプレッドシートに貼り付け**
   - データが自動的にクリップボードにコピーされます
   - Google SheetsやExcelを開き、貼り付け（Ctrl+V / Cmd+V）

## 抽出データ形式

以下の形式でタブ区切りデータが生成されます：

 < /dev/null |  列 | 内容 | 例 |
|---|------|-----|
| A | （空欄） | |
| B | 工事名称 | 令和6年度 国道1号線舗装修繕工事 |
| C | 設計書番号 | R06-KT-001234 |
| D | 発注機関（主要部） | 国土交通省 |
| E | 発注機関（詳細部） | 関東地方整備局 東京国道事務所 |
| F | 公告日時 | 令和6年7月1日 10時00分 |
| G | （空欄） | |
| H | 期限日時 | 令和6年7月20日 17時00分 |
| I | 開札日時 | 令和6年7月22日 10時00分 |
| J | PDF URL | https://... |
| K | （空欄） | |
| L | 工事種別 | 舗装工事 |

## 設定オプション

拡張機能のポップアップから「設定」ボタンをクリックして、以下の項目をカスタマイズできます：

- **自動クリップボードコピー**: データ抽出後、自動的にクリップボードにコピー
- **完了通知**: 処理完了時にデスクトップ通知を表示
- **デバッグモード**: 詳細なログを開発者ツールのコンソールに出力

## 技術仕様

- **Manifest Version**: 3
- **対応ブラウザ**: Google Chrome 90以上
- **使用技術**: Vanilla JavaScript, Chrome Extension APIs
- **権限**: 
  - `storage`: 設定の保存
  - `clipboardWrite`: クリップボードへのコピー
  - `notifications`: 通知の表示
  - `tabs`: タブ情報の取得
  - `scripting`: コンテンツスクリプトの実行

## プロジェクト構造

```
mlit-bid/
├── src/
│   ├── manifest.json         # 拡張機能の設定ファイル
│   ├── popup/               # ポップアップUI
│   │   ├── popup.html
│   │   ├── popup.js
│   │   └── popup.css
│   ├── content/             # コンテンツスクリプト
│   │   ├── content.js
│   │   └── extractor.js
│   ├── background/          # バックグラウンドスクリプト
│   │   └── background.js
│   ├── options/             # 設定ページ
│   │   ├── options.html
│   │   ├── options.js
│   │   └── options.css
│   ├── lib/                 # 共通ライブラリ
│   │   ├── constants.js
│   │   ├── utils.js
│   │   └── formatter.js
│   └── assets/              # アセット
│       └── icons/
├── test/                    # テスト関連
│   ├── test-page.html
│   └── TEST_GUIDE.md
├── docs/                    # ドキュメント
└── package.json

```

## 開発

### 必要な環境

- Node.js (推奨: v16以上)
- Google Chrome

### セットアップ

```bash
# 依存関係のインストール
npm install

# テストの実行
npm test

# ビルド
npm run build
```

### テスト

`test/TEST_GUIDE.md` を参照してください。

## トラブルシューティング

### 拡張機能が動作しない場合

1. 対応ページであることを確認
   - URLが `https://www.i-ppi.jp/IPPI/SearchServices/Web/Koji/Kokoku/List_Detail.aspx` であること

2. 拡張機能の権限を確認
   - Chrome拡張機能ページで必要な権限が許可されているか確認

3. エラーログを確認
   - 開発者ツール（F12）のコンソールでエラーメッセージを確認

### データが正しく抽出されない場合

- ページの読み込みが完了してから実行してください
- 入札情報サービスのページ構造が変更された可能性があります（Issue報告をお願いします）

## 貢献

バグ報告や機能提案は [Issues](https://github.com/takahiro-shimizu-2/mlit-bid/issues) からお願いします。

プルリクエストも歓迎します！

## ライセンス

MIT License

## 免責事項

- この拡張機能は非公式のツールです
- 入札情報サービスの利用規約を遵守してご使用ください
- データの正確性について保証はありません。必ず元のページで確認してください

## 更新履歴

### v1.0.0 (2024-07-20)
- 初回リリース
- 基本的なデータ抽出機能
- クリップボードへのコピー機能
- 設定画面の実装
