# 国土交通省 入札案件抽出 Chrome拡張機能 - テストケース表

**関連ドキュメント**: Project_design.md, Project_TODO.md, Project_Test.md  
**作成日**: 2025年7月20日  
**バージョン**: 1.0

----------------------------------------------------------------

## 1. 単体テストケース

### 1.1 データ抽出機能（extractor.js）

| TC_ID | テスト項目 | 前提条件 | テスト手順 | 入力データ | 期待結果 | 優先度 |
|-------|-----------|----------|------------|------------|----------|--------|
| UT_EXT_001 | 発注機関の抽出 | DOM要素が存在 | extractData()を実行 | id="lblHachukikan"の要素 | "防衛省北関東防衛局"が取得される | High |
| UT_EXT_002 | 工事名称の抽出 | DOM要素が存在 | extractData()を実行 | id="lblKojiNm"の要素 | "下総（７）航空管制施設整備工事"が取得される | High |
| UT_EXT_003 | 設計書番号の抽出 | DOM要素が存在 | extractData()を実行 | id="lblSekkeisyoNo"の要素 | "0010040000420250155"が取得される | High |
| UT_EXT_004 | 要素が存在しない場合 | DOM要素が不在 | extractData()を実行 | 存在しないID | 空文字列が返される、エラーなし | High |
| UT_EXT_005 | PDFリンクの抽出（.pdf） | リンクが存在 | extractPDFUrl()を実行 | href="*.pdf"のリンク | 正しいURLが取得される | High |
| UT_EXT_006 | PDFリンクの抽出（.pdf以外） | リンクが存在 | extractPDFUrl()を実行 | href="*.docx"のリンク | 正しいURLが取得される | Medium |
| UT_EXT_007 | 複数PDFリンク | 複数リンク存在 | extractPDFUrl()を実行 | 複数の公開中リンク | 最初の「公開中」リンクが取得される | Medium |

### 1.2 データ整形機能（formatter.js）

| TC_ID | テスト項目 | 前提条件 | テスト手順 | 入力データ | 期待結果 | 優先度 |
|-------|-----------|----------|------------|------------|----------|--------|
| UT_FMT_001 | 発注機関の分割（省） | データ抽出済み | parseOrganization()を実行 | "防衛省北関東防衛局" | D列:"防衛省"、E列:"北関東防衛局" | High |
| UT_FMT_002 | 発注機関の分割（県） | データ抽出済み | parseOrganization()を実行 | "東京都建設局" | D列:"東京都"、E列:"建設局" | High |
| UT_FMT_003 | 発注機関の分割（内閣府） | データ抽出済み | parseOrganization()を実行 | "内閣府" | D列:"内閣府"、E列:空欄 | High |
| UT_FMT_004 | 発注機関の分割（その他） | データ抽出済み | parseOrganization()を実行 | "○○建設株式会社" | D列:"○○建設株式会社"、E列:空欄 | High |
| UT_FMT_005 | タブ区切り形式変換 | データ整形済み | formatData()を実行 | 完全なデータセット | 正しい列順序でタブ区切り | High |
| UT_FMT_006 | 空データの処理 | 一部データ欠損 | formatData()を実行 | 一部nullのデータ | 空文字列として処理される | Medium |
| UT_FMT_007 | 特殊文字の処理 | 特殊文字含む | formatData()を実行 | タブ、改行を含むデータ | 適切にエスケープされる | Medium |

### 1.3 ユーティリティ機能（utils.js）

| TC_ID | テスト項目 | 前提条件 | テスト手順 | 入力データ | 期待結果 | 優先度 |
|-------|-----------|----------|------------|------------|----------|--------|
| UT_UTL_001 | 日付フォーマット（正常） | - | formatDate()を実行 | "2025年07月18日 00時00分" | 正しくフォーマットされる | Medium |
| UT_UTL_002 | 日付フォーマット（異常） | - | formatDate()を実行 | "不正な日付" | 元の文字列が返される | Medium |
| UT_UTL_003 | デバッグログ（有効時） | デバッグモードON | debugLog()を実行 | "テストメッセージ" | コンソールに出力される | Low |
| UT_UTL_004 | デバッグログ（無効時） | デバッグモードOFF | debugLog()を実行 | "テストメッセージ" | 出力されない | Low |

----------------------------------------------------------------

## 2. 統合テストケース

| TC_ID | テスト項目 | 前提条件 | テスト手順 | 入力データ | 期待結果 | 優先度 |
|-------|-----------|----------|------------|------------|----------|--------|
| IT_001 | Popup→Content通信 | 拡張機能インストール済み | 1.ポップアップを開く<br>2.抽出ボタンクリック | - | Content Scriptにメッセージ送信される | High |
| IT_002 | Content→Background通信 | データ抽出完了 | 1.データ抽出実行<br>2.結果を送信 | 抽出データ | Backgroundで受信される | High |
| IT_003 | クリップボードコピー | 自動コピーON | 1.データ抽出完了<br>2.Background処理 | 整形済みデータ | クリップボードにコピーされる | High |
| IT_004 | 通知表示 | 通知表示ON | 1.処理完了<br>2.通知送信 | - | Chrome通知が表示される | Medium |
| IT_005 | 設定の反映 | 設定変更済み | 1.設定を変更<br>2.抽出実行 | 各種設定値 | 設定に従って動作する | Medium |

----------------------------------------------------------------

## 3. E2Eテストケース

### 3.1 基本機能テスト

| TC_ID | テスト項目 | 前提条件 | テスト手順 | 期待結果 | 優先度 |
|-------|-----------|----------|------------|----------|--------|
| E2E_001 | 正常系：データ抽出フロー | 案件概要ページ表示 | 1.拡張機能アイコンクリック<br>2.「データを抽出」クリック<br>3.完了確認 | データがクリップボードにコピーされる | High |
| E2E_002 | スプレッドシート貼り付け | データコピー済み | 1.スプレッドシートを開く<br>2.Ctrl+Vで貼り付け | 正しい列にデータが配置される | High |
| E2E_003 | 複数タブでの動作 | 複数タブ開いている | 1.別タブでページ開く<br>2.データ抽出実行 | アクティブタブのデータのみ抽出される | Medium |
| E2E_004 | エラーハンドリング | 非対応ページ | 1.別サイトで実行<br>2.エラー確認 | エラーメッセージが表示される | Medium |

### 3.2 設定機能テスト

| TC_ID | テスト項目 | 前提条件 | テスト手順 | 期待結果 | 優先度 |
|-------|-----------|----------|------------|----------|--------|
| E2E_005 | 設定画面アクセス | - | 1.ポップアップ開く<br>2.設定ボタンクリック | 設定画面が表示される | Medium |
| E2E_006 | 設定の保存 | 設定画面表示 | 1.設定を変更<br>2.保存ボタンクリック | 設定が保存される | Medium |
| E2E_007 | 設定のキャンセル | 設定変更済み | 1.設定を変更<br>2.キャンセルクリック | 変更が破棄される | Low |

----------------------------------------------------------------

## 4. 非機能テストケース

### 4.1 パフォーマンステスト

| TC_ID | テスト項目 | 測定条件 | 測定項目 | 合格基準 | 優先度 |
|-------|-----------|----------|----------|----------|--------|
| PF_001 | 抽出処理時間 | 通常のページサイズ | 処理開始から完了まで | 3秒以内 | High |
| PF_002 | メモリ使用量 | 連続10回実行 | 最大メモリ使用量 | 50MB以下 | Medium |
| PF_003 | CPU使用率 | 処理実行中 | 平均CPU使用率 | 10%以下 | Medium |

### 4.2 互換性テスト

| TC_ID | テスト項目 | テスト環境 | テスト内容 | 合格基準 | 優先度 |
|-------|-----------|------------|-----------|----------|--------|
| CP_001 | Chrome 90 | Windows 10 | 全機能テスト | 正常動作 | High |
| CP_002 | Chrome 100 | Windows 11 | 全機能テスト | 正常動作 | High |
| CP_003 | Chrome最新版 | macOS 12 | 全機能テスト | 正常動作 | High |
| CP_004 | 異なる画面解像度 | 1920x1080, 1366x768 | UI表示確認 | レイアウト崩れなし | Medium |

### 4.3 セキュリティテスト

| TC_ID | テスト項目 | テスト内容 | 確認項目 | 合格基準 | 優先度 |
|-------|-----------|-----------|----------|----------|--------|
| SC_001 | 外部通信確認 | ネットワーク監視 | 通信ログ | 外部通信なし | High |
| SC_002 | ストレージ確認 | chrome.storage内容 | 保存データ | 機密情報なし | High |
| SC_003 | CSP準拠確認 | コンソール確認 | CSPエラー | エラーなし | Medium |

----------------------------------------------------------------

## 5. 回帰テストケース

| TC_ID | テスト項目 | 実施タイミング | テスト範囲 | 優先度 |
|-------|-----------|---------------|-----------|--------|
| RG_001 | 基本機能確認 | 機能追加・修正後 | E2E_001～E2E_004 | High |
| RG_002 | データ整形確認 | formatter.js修正後 | UT_FMT_001～UT_FMT_007 | High |
| RG_003 | 設定機能確認 | 設定関連修正後 | E2E_005～E2E_007 | Medium |
| RG_004 | パフォーマンス確認 | 大規模変更後 | PF_001～PF_003 | Medium |

----------------------------------------------------------------

## 6. 異常系テストケース

| TC_ID | テスト項目 | 異常条件 | テスト手順 | 期待結果 | 優先度 |
|-------|-----------|----------|------------|----------|--------|
| AB_001 | DOM構造変更 | 要素IDが変更 | データ抽出実行 | エラーメッセージ表示 | High |
| AB_002 | ネットワーク切断 | オフライン状態 | 拡張機能実行 | ローカル処理は正常動作 | Medium |
| AB_003 | ストレージ容量不足 | ストレージフル | 設定保存 | エラーメッセージ表示 | Low |
| AB_004 | 権限不足 | クリップボード権限なし | コピー実行 | 権限要求ダイアログ表示 | Medium |

----------------------------------------------------------------

## 7. テスト実行優先順位

### 7.1 必須テスト（Priority 1）
- すべてのHighプライオリティテストケース
- 基本的なE2Eフロー（E2E_001, E2E_002）
- セキュリティテスト（SC_001, SC_002）

### 7.2 推奨テスト（Priority 2）
- Mediumプライオリティテストケース
- 互換性テスト
- パフォーマンステスト

### 7.3 オプションテスト（Priority 3）
- Lowプライオリティテストケース
- 詳細な異常系テスト

----------------------------------------------------------------

## 8. テスト終了条件

1. すべてのHighプライオリティテストケースが合格
2. Critical/Majorバグが0件
3. テストカバレッジが80%以上
4. パフォーマンス基準を満たす

----------------------------------------------------------------

## 9. 不具合管理

### 9.1 不具合レベル
- **Critical**: 機能が全く動作しない、データ破損
- **Major**: 主要機能の不具合、回避策なし
- **Minor**: 軽微な不具合、回避策あり
- **Trivial**: UIの細かい問題、改善要望

### 9.2 不具合ステータス
- New: 新規登録
- Assigned: 担当者割当済み
- In Progress: 修正中
- Resolved: 修正完了
- Verified: 検証完了
- Closed: クローズ