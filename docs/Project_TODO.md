# 国土交通省 入札案件抽出 Chrome拡張機能 - 開発TODOリスト

**関連ドキュメント**: Project_design.md, Project_Test.md, Project_TestCase.md  
**注**: このTODOリストはProject_design.mdの設計仕様に基づいて作成されています

----------------------------------------------------------------

## Phase 1: 基本構造とmanifest.json作成 (1週間)

### 1.1 プロジェクト初期設定
- [ ] プロジェクトディレクトリ構造を作成
  - [ ] srcディレクトリ作成
  - [ ] src/popup、src/content、src/background、src/optionsディレクトリ作成
  - [ ] src/lib、src/assets、src/assets/iconsディレクトリ作成
  - [ ] testsディレクトリとunit、e2eサブディレクトリ作成

### 1.2 manifest.json作成
- [ ] manifest.jsonファイルを作成（Manifest V3準拠）
  - [ ] 基本情報を設定（name, version, description）
  - [ ] permissionsを設定（storage, clipboardWrite, notifications, tabs）
  - [ ] content_scriptsの設定（入札情報サービスのURLパターン）
  - [ ] background service workerの設定
  - [ ] actionの設定（ポップアップ）
  - [ ] iconsの設定（16x16, 48x48, 128x128）

### 1.3 アイコン作成
- [ ] 拡張機能用アイコンを作成
  - [ ] icon16.pngを作成
  - [ ] icon48.pngを作成
  - [ ] icon128.pngを作成

----------------------------------------------------------------

## Phase 2: Content Scriptによるデータ抽出機能実装 (1週間)

### 2.1 content.js基本実装
- [ ] content.jsファイルを作成
  - [ ] DOMContentLoadedイベントリスナーを設定
  - [ ] chrome.runtime.onMessageリスナーを設定
  - [ ] エラーハンドリングの基本構造を実装

### 2.2 extractor.js実装
- [ ] extractor.jsファイルを作成
  - [ ] extractData()関数を実装
    - [ ] 発注機関の抽出（id="lblHachukikan"）
    - [ ] 工事名称の抽出（id="lblKojiNm"）
    - [ ] 工事場所の抽出（id="lblKojiPlaceFrom"）
    - [ ] 工事種別の抽出（id="lblKojiType"）
    - [ ] 設計書番号の抽出（id="lblSekkeisyoNo"）
    - [ ] 公告日時の抽出（id="lblKokokuDate"）
    - [ ] 期限日時の抽出（id="lblkigenDate"）
    - [ ] 開札日時の抽出（id="lblKasatuDate"）
  - [ ] extractPDFUrl()関数を実装
    - [ ] 公開状態が「公開中」のPDFリンクを検索
    - [ ] href属性からURLを取得
    - [ ] .pdf以外の拡張子にも対応

### 2.3 formatter.js実装
- [ ] formatter.jsファイルを作成
  - [ ] formatData()関数を実装
    - [ ] 発注機関名を解析してD列とE列に分割する処理
    - [ ] 日時データのフォーマット処理
    - [ ] タブ区切り形式への変換処理
  - [ ] parseOrganization()関数を実装
    - [ ] 「～省」「内閣府」「～県」のパターンマッチング
    - [ ] D列とE列への振り分けロジック

----------------------------------------------------------------

## Phase 3: Popup UIとBackground Script実装 (1週間)

### 3.1 popup.html作成
- [ ] popup.htmlファイルを作成
  - [ ] 基本的なHTML構造を作成
  - [ ] 「データを抽出」ボタンを配置
  - [ ] 状態表示エリアを配置
  - [ ] 設定・ヘルプボタンを配置

### 3.2 popup.css作成
- [ ] popup.cssファイルを作成
  - [ ] ポップアップウィンドウのスタイリング（幅: 300px）
  - [ ] ボタンのスタイリング
  - [ ] 状態表示のスタイリング
  - [ ] レスポンシブデザインの考慮

### 3.3 popup.js実装
- [ ] popup.jsファイルを作成
  - [ ] DOMContentLoadedイベントリスナーを設定
  - [ ] 「データを抽出」ボタンのクリックイベントを実装
  - [ ] chrome.tabs.queryで現在のタブを取得
  - [ ] content scriptへのメッセージ送信を実装
  - [ ] 抽出結果の受信と表示処理を実装

### 3.4 background.js実装
- [ ] background.jsファイルを作成
  - [ ] chrome.runtime.onMessageリスナーを設定
  - [ ] クリップボードへのコピー処理を実装
  - [ ] 通知の表示処理を実装
  - [ ] エラーハンドリングを実装

----------------------------------------------------------------

## Phase 4: 設定画面とオプション機能実装 (3日)

### 4.1 options.html作成
- [ ] options.htmlファイルを作成
  - [ ] 設定画面のHTML構造を作成
  - [ ] チェックボックスを配置（自動コピー、通知表示、デバッグモード）
  - [ ] 保存・キャンセルボタンを配置

### 4.2 options.css作成
- [ ] options.cssファイルを作成
  - [ ] 設定画面のスタイリング
  - [ ] フォームのスタイリング
  - [ ] ボタンのスタイリング

### 4.3 options.js実装
- [ ] options.jsファイルを作成
  - [ ] chrome.storage.syncからの設定読み込み処理
  - [ ] 設定保存処理の実装
  - [ ] 保存完了通知の実装
  - [ ] キャンセル処理の実装

### 4.4 設定機能の統合
- [ ] popup.jsに設定読み込み処理を追加
- [ ] background.jsに設定に基づく条件分岐を追加
- [ ] content.jsにデバッグモードの処理を追加

----------------------------------------------------------------

## Phase 5: ユーティリティとヘルパー関数実装 (2日)

### 5.1 constants.js作成
- [ ] constants.jsファイルを作成
  - [ ] URLパターンの定義
  - [ ] セレクターの定義
  - [ ] デフォルト設定値の定義
  - [ ] エラーメッセージの定義

### 5.2 utils.js作成
- [ ] utils.jsファイルを作成
  - [ ] デバッグログ関数の実装
  - [ ] エラーハンドリングユーティリティの実装
  - [ ] 日付フォーマット関数の実装
  - [ ] 文字列処理ユーティリティの実装

----------------------------------------------------------------

## Phase 6: テストとデバッグ (3日)

### 6.1 単体テスト作成
- [ ] Jestの設定
  - [ ] package.jsonの作成
  - [ ] jest.config.jsの作成
  - [ ] 必要な依存関係のインストール
- [ ] extractor.test.jsの作成
  - [ ] 各抽出関数のテスト
  - [ ] エラーケースのテスト
- [ ] formatter.test.jsの作成
  - [ ] データ整形のテスト
  - [ ] 発注機関解析のテスト
- [ ] utils.test.jsの作成
  - [ ] ユーティリティ関数のテスト

### 6.2 E2Eテスト作成
- [ ] Puppeteerの設定
- [ ] 基本フローのE2Eテスト作成
  - [ ] 拡張機能のインストールテスト
  - [ ] データ抽出フローのテスト
  - [ ] クリップボードコピーのテスト

### 6.3 デバッグとリファクタリング
- [ ] Chrome開発者ツールでのデバッグ
- [ ] パフォーマンス最適化
- [ ] コードの整理とリファクタリング
- [ ] コメントとドキュメントの追加

----------------------------------------------------------------

## Phase 7: ビルドとパッケージング (1日)

### 7.1 ビルド環境構築
- [ ] webpackの設定
  - [ ] webpack.config.jsの作成
  - [ ] 開発用と本番用の設定分離
- [ ] babelの設定
  - [ ] .babelrcの作成
  - [ ] ES6+からES5への変換設定

### 7.2 ビルドスクリプト作成
- [ ] package.jsonにビルドスクリプトを追加
  - [ ] 開発ビルドスクリプト
  - [ ] 本番ビルドスクリプト
  - [ ] テストスクリプト

### 7.3 パッケージング
- [ ] 拡張機能のパッケージング
  - [ ] 不要ファイルの除外
  - [ ] .zipファイルの作成
  - [ ] ファイルサイズの最適化

----------------------------------------------------------------

## Phase 8: Chrome Web Store公開準備 (1日)

### 8.1 公開用素材準備
- [ ] スクリーンショットの作成（1280x800）
- [ ] プロモーション用タイル画像の作成
- [ ] 詳細な説明文の作成
- [ ] プライバシーポリシーの作成

### 8.2 デベロッパーアカウント設定
- [ ] Chrome Web Store Developer Dashboardへの登録
- [ ] 開発者情報の入力
- [ ] 支払い情報の設定（必要な場合）

### 8.3 拡張機能の申請
- [ ] 拡張機能のアップロード
- [ ] カテゴリーと言語の設定
- [ ] 価格設定（無料）
- [ ] レビュー申請の提出

----------------------------------------------------------------

## 継続的な改善タスク

### メンテナンス
- [ ] ユーザーフィードバックの収集と対応
- [ ] 入札情報サービスのDOM変更への対応
- [ ] Chrome APIの更新への対応
- [ ] セキュリティアップデート

### 機能拡張（将来的な検討）
- [ ] 複数案件の一括抽出機能
- [ ] 抽出データの一時保存機能
- [ ] カスタム列設定機能
- [ ] エクスポート形式の追加（CSV、JSON）

----------------------------------------------------------------

## 注意事項

1. 各フェーズは前のフェーズの完了を前提としています
2. SOLIDの原則に従い、各ファイルは300行以内に収めること
3. 各機能は単一責任の原則に従って実装すること
4. テストカバレッジは80%以上を目標とすること
5. Chrome拡張機能のベストプラクティスに従うこと