# 国土交通省 入札案件抽出 Chrome拡張機能 - 要件定義書

**作成日**: 2025年7月21日  
**バージョン**: 2.0  
**関連ドキュメント**: README.md, Project_design.md, Project_TODO.md

----------------------------------------------------------------

## 1. プロジェクト概要

### 1.1 背景
入札情報サービスの工事案件詳細ページから必要な情報を手動で収集し、スプレッドシートに転記する作業は時間がかかり、転記ミスのリスクもある。この作業を自動化することで、業務効率を大幅に改善できる。

### 1.2 目的
入札情報サービスの入札案件詳細ページから、必要な情報を自動的に抽出し、スプレッドシートに貼り付け可能な形式でクリップボードにコピーするChrome拡張機能を開発する。

### 1.3 期待される効果
- 手動でのデータ転記作業の削減（作業時間90%削減）
- 転記ミスの防止（エラー率0%）
- 案件情報の効率的な管理

----------------------------------------------------------------

## 2. ステークホルダー

### 2.1 プライマリーステークホルダー
- **入札業務担当者**: 日常的に入札情報を収集・管理する実務担当者
- **行政書士・コンサルタント**: クライアントのために入札情報を収集・分析する専門家

### 2.2 セカンダリーステークホルダー
- **システム管理者**: 拡張機能の導入・管理を行う担当者
- **経営層**: 業務効率化の成果を評価する意思決定者

----------------------------------------------------------------

## 3. 機能要件

### 3.1 必須機能

#### 3.1.1 データ抽出機能
- 入札情報サービスの案件詳細ページ（List_Detail.aspx）から以下の項目を抽出する
  - 発注機関
  - 工事名称
  - 工事場所
  - 工事種別／工事の業種
  - 設計書番号
  - 公告日時
  - 期限日時
  - 開札日時
  - PDFファイルへのリンク

#### 3.1.2 データ整形機能
- 抽出したデータを指定された列順序で整形する
  - A列：空欄
  - B列：工事名称
  - C列：設計書番号
  - D列：発注機関の内、～省or内閣府or～県orいずれもない場合は発注機関の全文言
  - E列：発注機関の内、D列以外を除いた全文言。D列に全て記載してしまった場合は空欄
  - F列：公告日時
  - G列：空欄
  - H列：期限日時
  - I列：開札日時
  - J列：PDFファイルへのURL
  - K列：空欄
  - L列：工事種別／工事の業種

#### 3.1.3 クリップボードコピー機能
- 整形したデータをタブ区切り形式でクリップボードにコピーする
- コピー完了時にポップアップ内で完了状態を表示する

### 3.2 対象ページ
- **詳細ページのみ対応**: 入札案件詳細ページ（List_Detail.aspx）でのみ動作
- **一覧ページ非対応**: 一覧ページからの複数案件一括抽出は行わない

### 3.3 エラーハンドリング
- 詳細ページ以外で実行された場合のエラー表示
- 必要な要素が見つからない場合のエラー表示
- PDFリンクが.pdf以外の形式の場合も正しく取得

----------------------------------------------------------------

## 4. 非機能要件

### 4.1 パフォーマンス要件
- 抽出処理時間: 3秒以内
- メモリ使用量: 50MB以下
- CPU使用率: 10%以下

### 4.2 互換性要件
- 対応ブラウザ: Google Chrome 90以上
- 対応OS: Windows 10/11, macOS 10.15以上

### 4.3 セキュリティ要件
- 外部サーバーへのデータ送信を行わない
- すべての処理をローカルで実行
- Content Security Policy (CSP) に準拠

### 4.4 ユーザビリティ要件
- シンプルで直感的なUI（ボタン1つのみ）
- 最小限のクリック数で操作可能（1クリック）
- 明確なエラーメッセージ

### 4.5 保守性要件
- モジュール化された設計
- 十分なコメントとドキュメント
- 機能の単純化による保守性の向上

----------------------------------------------------------------

## 5. 制約事項

### 5.1 技術的制約
- Chrome拡張機能のManifest V3に準拠
- 入札情報サービスのDOM構造に依存
- ASP.NETのポストバック機構により、一覧ページからの詳細ページ自動取得は不可

### 5.2 運用上の制約
- 入札情報サービスのサイト構造が変更された場合、更新が必要
- Chrome Web Storeの審査基準に準拠
- 詳細ページを個別に開く必要がある

----------------------------------------------------------------

## 6. 前提条件

### 6.1 利用環境
- インターネット接続が必要
- 入札情報サービスへのアクセス権限が必要
- Google Chromeがインストールされていること

### 6.2 利用者スキル
- 基本的なPC操作スキル
- Chrome拡張機能の基本的な使い方の理解
- スプレッドシートの基本操作スキル
- 入札案件詳細ページへのナビゲーション能力

----------------------------------------------------------------

## 7. 成功基準

### 7.1 定量的基準
- データ抽出精度: 100%
- 処理時間: 3秒以内
- ユーザー満足度: 80%以上

### 7.2 定性的基準
- 従来の手動作業と比較して作業効率が向上すること
- エラーが発生した場合でも適切に対処できること
- 継続的に利用されること

----------------------------------------------------------------

## 8. リスクと対策

### 8.1 技術的リスク
- **リスク**: 入札情報サービスのサイト構造変更
- **対策**: DOM要素の監視と定期的な動作確認

### 8.2 運用リスク
- **リスク**: Chrome拡張機能のポリシー変更
- **対策**: Chrome開発者ドキュメントの定期的な確認

----------------------------------------------------------------

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| 入札情報サービス | 国土交通省が運営する入札情報公開サイト |
| 案件詳細ページ | 個別の入札案件の詳細情報が表示されるページ（List_Detail.aspx） |
| Chrome拡張機能 | Google Chromeブラウザの機能を拡張するプログラム |
| DOM | Document Object Model、HTMLの構造を表現するオブジェクトモデル |
| クリップボード | コピー＆ペースト時に使用される一時的なデータ保存領域 |

----------------------------------------------------------------

## 10. 変更履歴

### v2.0 (2025-07-21)
- 一覧ページからの抽出機能を削除
- 詳細ページ専用の拡張機能に変更
- UIを1ボタンに簡素化

### v1.0 (2025-07-20)
- 初版作成

----------------------------------------------------------------

## 11. 承認

本要件定義書は、以下の関係者によって確認・承認されたものとする。

| 役割 | 氏名 | 承認日 |
|------|------|--------|
| プロジェクトオーナー | | |
| 開発責任者 | | |
| 利用者代表 | | |